{"ast":null,"code":"import { fromEvent, map, switchMap, takeUntil } from \"rxjs\";\nvar box = document.getElementById('box'); // box.onmousedown = function (event) {\n//     let distanceX = event.clientX - event.target.offsetLeft;\n//     let distanceY = event.clientY - event.target.offsetTop;\n//\n//     document.onmousemove = function (e){\n//         console.log('e.clientX')\n//         console.log(e.clientX)\n//         console.log('e.clientX')\n//         console.log('e.clientY')\n//         console.log(e.clientY)\n//         console.log('e.clientY')\n//         let positionX = e.clientX-distanceX\n//         let positionY = e.clientY-distanceY\n//\n//         box.style.left = positionX + \"px\"\n//         box.style.top = positionY + \"px\"\n//\n//\n//         box.onmouseup = function (){\n//             document.onmousemove = null\n//         }\n//     }\n// }\n\nfromEvent(box, \"mousedown\").pipe(map(function (event) {\n  return {\n    distanceX: event.clientX - event.target.offsetLeft,\n    distanceY: event.clientY - event.target.offsetTop\n  };\n}), switchMap(function (_ref) {\n  var distanceX = _ref.distanceX,\n      distanceY = _ref.distanceY;\n  // console.log({distanceX,distanceY})\n  return fromEvent(document, \"mousemove\").pipe(map(function (event) {\n    return {\n      left: event.clientX - distanceX,\n      top: event.clientY - distanceY\n    };\n  }), takeUntil(fromEvent(box, 'mouseup')) // 暂停数据流传送\n  );\n})).subscribe(function (_ref2) {\n  var left = _ref2.left,\n      top = _ref2.top;\n  box.style.left = left + 'px';\n  box.style.top = top + \"px\";\n});","map":{"version":3,"sources":["/Users/chandle/web-fronted/rxjs/src/index.js"],"names":["fromEvent","map","switchMap","takeUntil","box","document","getElementById","pipe","event","distanceX","clientX","target","offsetLeft","distanceY","clientY","offsetTop","left","top","subscribe","style"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,GAAnB,EAAwBC,SAAxB,EAAmCC,SAAnC,QAAmD,MAAnD;AAEA,IAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAZ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGAN,SAAS,CAACI,GAAD,EAAM,WAAN,CAAT,CAA4BG,IAA5B,CACQN,GAAG,CAAC,UAAUO,KAAV,EAAiB;AACjB,SAAO;AACHC,IAAAA,SAAS,EAAED,KAAK,CAACE,OAAN,GAAgBF,KAAK,CAACG,MAAN,CAAaC,UADrC;AAEHC,IAAAA,SAAS,EAAEL,KAAK,CAACM,OAAN,GAAgBN,KAAK,CAACG,MAAN,CAAaI;AAFrC,GAAP;AAIH,CALE,CADX,EAOQb,SAAS,CAAC,gBAA4B;AAAA,MAA1BO,SAA0B,QAA1BA,SAA0B;AAAA,MAAfI,SAAe,QAAfA,SAAe;AAClC;AACA,SAAOb,SAAS,CAACK,QAAD,EAAW,WAAX,CAAT,CAAiCE,IAAjC,CACCN,GAAG,CAAC,UAAAO,KAAK;AAAA,WAAK;AACVQ,MAAAA,IAAI,EAAER,KAAK,CAACE,OAAN,GAAgBD,SADZ;AAEVQ,MAAAA,GAAG,EAAET,KAAK,CAACM,OAAN,GAAgBD;AAFX,KAAL;AAAA,GAAN,CADJ,EAKCV,SAAS,CAACH,SAAS,CAACI,GAAD,EAAK,SAAL,CAAV,CALV,CAKsC;AALtC,GAAP;AAOH,CATQ,CAPjB,EAiBEc,SAjBF,CAiBY,iBAAuB;AAAA,MAAZF,IAAY,SAAZA,IAAY;AAAA,MAANC,GAAM,SAANA,GAAM;AAC/Bb,EAAAA,GAAG,CAACe,KAAJ,CAAUH,IAAV,GAAiBA,IAAI,GAAG,IAAxB;AACAZ,EAAAA,GAAG,CAACe,KAAJ,CAAUF,GAAV,GAAgBA,GAAG,GAAG,IAAtB;AACH,CApBD","sourcesContent":["import {fromEvent, map, switchMap, takeUntil} from \"rxjs\";\n\nconst box = document.getElementById('box')\n\n// box.onmousedown = function (event) {\n//     let distanceX = event.clientX - event.target.offsetLeft;\n//     let distanceY = event.clientY - event.target.offsetTop;\n//\n//     document.onmousemove = function (e){\n//         console.log('e.clientX')\n//         console.log(e.clientX)\n//         console.log('e.clientX')\n//         console.log('e.clientY')\n//         console.log(e.clientY)\n//         console.log('e.clientY')\n//         let positionX = e.clientX-distanceX\n//         let positionY = e.clientY-distanceY\n//\n//         box.style.left = positionX + \"px\"\n//         box.style.top = positionY + \"px\"\n//\n//\n//         box.onmouseup = function (){\n//             document.onmousemove = null\n//         }\n//     }\n// }\n\n\nfromEvent(box, \"mousedown\").pipe(\n        map(function (event) {\n            return {\n                distanceX: event.clientX - event.target.offsetLeft,\n                distanceY: event.clientY - event.target.offsetTop\n            }\n        }),\n        switchMap(({distanceX, distanceY}) => {\n            // console.log({distanceX,distanceY})\n            return fromEvent(document, \"mousemove\").pipe(\n                    map(event => ({\n                        left: event.clientX - distanceX,\n                        top: event.clientY - distanceY\n                    })),\n                    takeUntil(fromEvent(box,'mouseup'))  // 暂停数据流传送\n            )\n        })\n).subscribe(function ({left, top}) {\n    box.style.left = left + 'px'\n    box.style.top = top + \"px\"\n})\n"]},"metadata":{},"sourceType":"module"}